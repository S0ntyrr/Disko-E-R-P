@model DiskoERP.Core.DTOs.LoginDto
@{
    Layout = "_LoginLayout";
    ViewData["Title"] = "Iniciar Sesión - Disko ERP";
}

<div class="login-container">
    <!-- Panel izquierdo (info / branding) -->
    <div class="login-info d-none d-lg-flex flex-column justify-content-center align-items-start">
        <div class="info-content">
            <h2 class="info-title">
                <i class="fas fa-music"></i> Bienvenido a <strong>Disko ERP</strong>
            </h2>
            <p class="lead mb-4">
                Administra tu discoteca de forma moderna y eficiente.
            </p>
            <ul class="info-list">
                <li><i class="fas fa-check-circle"></i> Control de acceso y aforo</li>
                <li><i class="fas fa-check-circle"></i> Reservaciones VIP</li>
                <li><i class="fas fa-check-circle"></i> Punto de venta integrado</li>
                <li><i class="fas fa-check-circle"></i> Inventario en tiempo real</li>
                <li><i class="fas fa-check-circle"></i> Gestión de personal</li>
            </ul>
        </div>
    </div>

    <!-- Panel derecho (formulario) -->
    <div class="login-box shadow-lg">
        <!-- Logo -->
        <div class="login-header text-center">
            <div class="logo-container mb-3">
                <i class="fas fa-music logo-icon"></i>
            </div>
            <h1 class="brand-title">Disko ERP</h1>
            <p class="brand-subtitle">Sistema de Gestión para Discotecas</p>
        </div>

        <!-- Mensajes -->
        @if (TempData["Error"] != null)
        {
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-circle"></i> @TempData["Error"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }

        @if (TempData["Success"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fas fa-check-circle"></i> @TempData["Success"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }

        <!-- Formulario -->
        <form asp-action="Login" asp-controller="Auth" method="post" id="loginForm" class="login-form">
            @Html.AntiForgeryToken()

            <div class="form-group mb-3">
                <label asp-for="Usuario" class="form-label">
                    <i class="fas fa-user"></i> Usuario o Email
                </label>
                <input asp-for="Usuario" class="form-control form-control-lg" placeholder="Ingresa tu usuario" autofocus autocomplete="username" />
                <span asp-validation-for="Usuario" class="text-danger small"></span>
            </div>

            <div class="form-group mb-3">
                <label asp-for="Password" class="form-label">
                    <i class="fas fa-lock"></i> Contraseña
                </label>
                <div class="password-input-group">
                    <input asp-for="Password" type="password" class="form-control form-control-lg" id="passwordInput" placeholder="••••••••" autocomplete="current-password" />
                    <button type="button" class="btn-toggle-password" id="togglePassword">
                        <i class="fas fa-eye" id="toggleIcon"></i>
                    </button>
                </div>
                <span asp-validation-for="Password" class="text-danger small"></span>
            </div>

            <div class="form-check mb-3">
                <input asp-for="RecordarSesion" type="checkbox" class="form-check-input" id="recordarSesion" />
                <label class="form-check-label" for="recordarSesion">Recordar sesión</label>
            </div>

            <button type="submit" class="btn btn-primary btn-lg w-100 mb-3" id="btnLogin">
                <span class="btn-text"><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</span>
                <span class="spinner-border spinner-border-sm d-none" role="status" id="loginSpinner"></span>
            </button>

            <div class="text-center">
                <a asp-action="RecuperarPassword" asp-controller="Auth" class="forgot-password-link">
                    ¿Olvidaste tu contraseña?
                </a>
            </div>
        </form>

        <div class="login-footer text-center mt-4">
            <p class="text-muted small mb-0">
                <i class="fas fa-shield-alt"></i> Acceso seguro - Disko ERP © 2025
            </p>
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/login.css" />
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/login.js"></script>
}
